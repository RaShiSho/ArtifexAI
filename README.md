# ArtifexAI - æ™ºèƒ½å›¾åƒå¤„ç†å¹³å°

## é¡¹ç›®ç®€ä»‹

ArtifexAI æ˜¯ä¸€ä¸ªåŸºäºŽ Flask æ¡†æž¶æž„å»ºçš„æ™ºèƒ½å›¾åƒå¤„ç†å¹³å°ï¼Œæ—¨åœ¨æä¾›ä¸€ç³»åˆ—å…ˆè¿›çš„å›¾åƒå¤„ç†åŠŸèƒ½ã€‚å®ƒé›†æˆäº†å¤šç§æ·±åº¦å­¦ä¹ æ¨¡åž‹å’Œä¼ ç»Ÿå›¾åƒå¤„ç†ç®—æ³•ï¼Œä¸ºç”¨æˆ·æä¾›ç¾Žé¢œã€äººè„¸å¢žå¼ºã€è¶…åˆ†è¾¨çŽ‡ã€æ™ºèƒ½èƒŒæ™¯æ›¿æ¢ä»¥åŠåŸºäºŽå†…å®¹çš„å›¾åƒæ»¤é•œåˆ†ç±»ç­‰æœåŠ¡ã€‚æœ¬å¹³å°è‡´åŠ›äºŽç®€åŒ–å¤æ‚çš„å›¾åƒå¤„ç†æµç¨‹ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿè½»æ¾å®žçŽ°é«˜è´¨é‡çš„å›¾åƒç¼–è¾‘å’Œåˆ›ä½œã€‚

## ä¸»è¦åŠŸèƒ½

ArtifexAI æä¾›äº†ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š

*   **åŸºç¡€å›¾åƒå¤„ç†**ï¼šåŒ…å«å›¾åƒç¼©æ”¾ã€è‰²å½©ç©ºé—´è½¬æ¢ã€ç®—æœ¯è¿ç®—ã€å¯¹æ•°å˜æ¢ã€ç›´æ–¹å›¾å¤„ç†ï¼ˆå‡è¡¡åŒ–ã€å½’ä¸€åŒ–ï¼‰ã€å›¾åƒåˆ†å‰²ï¼ˆè¾¹ç¼˜æ£€æµ‹ï¼‰ã€å›¾åƒå¹³æ»‘ä¸Žé”åŒ–ã€å½¢æ€å­¦å¤„ç†ä»¥åŠå›¾åƒæ¢å¤ç­‰ä¼ ç»Ÿå›¾åƒå¤„ç†åŠŸèƒ½ã€‚
*   **ç¾Žé¢œä¸Žäººè„¸å¢žå¼º**ï¼šåˆ©ç”¨å…ˆè¿›çš„ç®—æ³•å¯¹äººè„¸è¿›è¡Œç¾ŽåŒ–ï¼ŒåŒ…æ‹¬ç£¨çš®ã€è‚¤è‰²è°ƒæ•´ã€é¢éƒ¨ç‰¹å¾ä¼˜åŒ–ç­‰ï¼Œå¹¶èƒ½å¯¹äººè„¸ç»†èŠ‚è¿›è¡Œè¶…åˆ†è¾¨çŽ‡å¢žå¼ºã€‚
*   **æ™ºèƒ½èƒŒæ™¯æ›¿æ¢**ï¼šé€šè¿‡ç²¾ç¡®çš„å›¾åƒåˆ†å‰²æŠ€æœ¯ï¼Œå®žçŽ°äººåƒä¸ŽèƒŒæ™¯çš„åˆ†ç¦»ï¼Œå¹¶æ”¯æŒæ™ºèƒ½ç”Ÿæˆæˆ–æ›¿æ¢ä¸ºå¤šç§é£Žæ ¼çš„èƒŒæ™¯ï¼ˆå¦‚è‡ªç„¶ã€åŸŽå¸‚ã€æŠ½è±¡ã€å¥‡å¹»ã€å¤ªç©ºã€å¤å¤ç­‰ï¼‰ã€‚
*   **è¶…åˆ†è¾¨çŽ‡å¢žå¼º**ï¼šåº”ç”¨æ·±åº¦å­¦ä¹ æ¨¡åž‹ï¼ˆå¦‚ Real-ESRGANï¼‰æå‡å›¾åƒåˆ†è¾¨çŽ‡ï¼Œæ¢å¤å›¾åƒç»†èŠ‚ï¼Œä½¿ä½Žåˆ†è¾¨çŽ‡å›¾åƒå˜å¾—æ¸…æ™°ã€‚
*   **å›¾åƒå†…å®¹åˆ†ç±»ä¸Žæ»¤é•œåº”ç”¨**ï¼šç»“åˆ CLIP å’Œ YOLOv5 ç­‰æ¨¡åž‹ï¼Œæ™ºèƒ½è¯†åˆ«å›¾åƒå†…å®¹ï¼Œå¹¶æ ¹æ®å†…å®¹è‡ªåŠ¨æŽ¨èæˆ–åº”ç”¨åˆé€‚çš„å›¾åƒæ»¤é•œã€‚


## æŠ€æœ¯æ ˆ

*   **åŽç«¯æ¡†æž¶**ï¼šPython, Flask
*   **å›¾åƒå¤„ç†åº“**ï¼šOpenCV, NumPy, Pillow (PIL)
*   **æ·±åº¦å­¦ä¹ æ¡†æž¶**ï¼šPyTorch
*   **AI æ¨¡åž‹**ï¼š
    *   CLIP (ç”¨äºŽå›¾åƒå†…å®¹åˆ†ç±»)
    *   YOLOv5 (ç”¨äºŽç›®æ ‡æ£€æµ‹ï¼Œå¦‚äººè„¸æ£€æµ‹)
    *   Real-ESRGAN (ç”¨äºŽå›¾åƒè¶…åˆ†è¾¨çŽ‡)
    *   GFPGAN (ç”¨äºŽäººè„¸å¢žå¼º)
    *   Hugging Face Diffusers (ç”¨äºŽ Stable Diffusion èƒŒæ™¯ç”Ÿæˆ)

## é¡¹ç›®æ¡†æž¶

ArtifexAI é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œä¸»è¦ç»“æž„å¦‚ä¸‹ï¼š

*   **`app.py`**ï¼šä¸»åº”ç”¨å…¥å£ï¼Œè´Ÿè´£è·¯ç”±å®šä¹‰ã€è¯·æ±‚å¤„ç†å’ŒåŠŸèƒ½é›†æˆã€‚
*   **`background/`**ï¼šåŒ…å«èƒŒæ™¯æ›¿æ¢ç›¸å…³æ¨¡å—ï¼Œå¦‚å›¾åƒåˆ†å‰²æ¨¡åž‹ã€å¢žå¼ºèƒŒæ™¯ç”Ÿæˆå™¨å’Œå›¾åƒåˆæˆå¤„ç†å™¨ã€‚
*   **`basic/`**ï¼šæä¾›åŸºç¡€å›¾åƒå¤„ç†åŠŸèƒ½ï¼Œå¦‚ç®—æœ¯è¿ç®—ã€è‰²å½©ç©ºé—´è½¬æ¢ã€ç›´æ–¹å›¾å¤„ç†ã€å½¢æ€å­¦æ“ä½œç­‰ã€‚
*   **`beauty/`**ï¼šå®žçŽ°ç¾Žé¢œå’Œäººè„¸å¢žå¼ºåŠŸèƒ½ï¼ŒåŒ…æ‹¬äººè„¸æ£€æµ‹ã€äººè„¸å¤„ç†å’Œçš®è‚¤å¢žå¼ºã€‚
*   **`clarity/`**ï¼šè´Ÿè´£å›¾åƒæ¸…æ™°åº¦æå‡ï¼Œä¸»è¦åŒ…å«è¶…åˆ†è¾¨çŽ‡å¢žå¼ºæ¨¡å—ã€‚
*   **`filter/`**ï¼šå®žçŽ°å›¾åƒå†…å®¹åˆ†ç±»å’Œæ»¤é•œåº”ç”¨ï¼ŒåŒ…æ‹¬ CLIP åˆ†ç±»å™¨ã€YOLO æ£€æµ‹å™¨å’Œå¤šç§æ»¤é•œæ•ˆæžœã€‚
*   **`gfpgan/`**ï¼šå­˜æ”¾ GFPGAN æ¨¡åž‹ç›¸å…³çš„æƒé‡æ–‡ä»¶ã€‚
*   **`templates/`**ï¼šå­˜æ”¾ HTML æ¨¡æ¿æ–‡ä»¶ï¼Œç”¨äºŽæ¸²æŸ“å‰ç«¯é¡µé¢ã€‚
*   **`static/`**ï¼šå­˜æ”¾é™æ€èµ„æºï¼Œå¦‚ CSSã€JavaScript å’Œå›¾ç‰‡ã€‚
*   **`requirements.txt`**ï¼šé¡¹ç›®ä¾èµ–åº“åˆ—è¡¨ã€‚
*   **`yolov5s.pt`**ï¼šYOLOv5 æ¨¡åž‹æƒé‡æ–‡ä»¶ã€‚

## éƒ¨ç½²æ–¹å¼

æœ¬é¡¹ç›®æŽ¨èä½¿ç”¨ Python è™šæ‹ŸçŽ¯å¢ƒè¿›è¡Œéƒ¨ç½²ï¼Œä»¥ç®¡ç†é¡¹ç›®ä¾èµ–ã€‚

1.  **å…‹éš†ä»“åº“**ï¼š
    ```bash
    git clone https://github.com/RaShiSho/ArtifexAI.git
    cd ArtifexAI
    ```

2.  **åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒ**ï¼š
    ```bash
    uv venv
    # Windows
    .venv\Scripts\activate
    # macOS/Linux
    source .venv/bin/activate
    ```

3.  **å®‰è£…ä¾èµ–**ï¼š

    **å¤§éƒ¨åˆ†ä¾èµ–**:
	```bash
    uv pip install -r requirements.txt
    ```
    
    *éƒ¨åˆ†ä¾èµ–ï¼ˆå¦‚ `torch`ã€`torchvision`ï¼‰å¯èƒ½éœ€è¦æ ¹æ®æ‚¨çš„ CUDA ç‰ˆæœ¬æ‰‹åŠ¨å®‰è£…ã€‚è¯·å‚è€ƒä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ã€‚*
    1. åˆ é™¤æŒ‰ç…§ requirements.txt ä¸‹è½½çš„ torch åº“
    ```bash
    uv pip uninstall torch torchvision torchaudio
	```
	2. é€šè¿‡å®˜ç½‘é“¾æŽ¥ä¸‹è½½ wheel æ–‡ä»¶å®‰è£…åŒ…
	```bash
	uv pip install torch==2.2.0 torchvision==0.17.0 torchaudio==2.2.0 --index-url https://download.pytorch.org/whl/cu121
	```

4. **éƒ¨åˆ†åŒ…æ–‡ä»¶ä¿®æ”¹**

	ç”±äºŽæˆ‘ä»¬ä½¿ç”¨çš„åº“çš„ç‰ˆæœ¬æ›´æ–°é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ä¿®æ”¹åº“ä¸­çš„æ–‡ä»¶
	å®šä½åˆ° `ArtifexAI\.venv\Lib\site-packages\basicsr\data\degradations.py` æ–‡ä»¶ä¸‹
	å°†ç¬¬ 8 è¡Œçš„
	```python
	from torchvision.transforms.functional_tensor import rgb_to_grayscale
	```
	ä¿®æ”¹ä¸º
	```python
	from torchvision.transforms._functional_tensor import rgb_to_grayscale
	```
	

5.  **æ¨¡åž‹ä¸‹è½½**ï¼š
    * æœ¬é¡¹ç›®ä¸­çš„éƒ¨åˆ†æ¨¡åž‹ï¼ˆå¦‚ Stable Diffusionã€YOLOv5ï¼‰ä¼šåœ¨é¦–æ¬¡è¿è¡Œæ—¶è‡ªåŠ¨ä¸‹è½½åˆ°æ‚¨çš„æœ¬åœ°ç¼“å­˜ç›®å½•ï¼ˆé€šå¸¸æ˜¯ `~/.cache/huggingface/hub/` å’Œ `~/.cache/torch/hub/checkpoints/`ï¼‰ã€‚è¯·ç¡®ä¿æ‚¨çš„ç½‘ç»œè¿žæŽ¥æ­£å¸¸ã€‚
	    * å¦‚æœ‰å¿…è¦å¯ä»¥å°† `app.py` ç¬¬10ã€11è¡Œé…ç½®ä¸ºä½ çš„ä»£ç†ç«¯å£ä»¥åŠ é€Ÿæ¨¡åž‹çš„ä¸‹è½½
	    ```python
	    os.environ["HTTP_PROXY"] = "http://127.0.0.1:10809"
		os.environ["HTTPS_PROXY"] = "http://127.0.0.1:10809"
		```
    * å…¶ä»–éœ€è¦çš„æ¨¡åž‹æƒé‡æ–‡ä»¶éœ€è¦æ‚¨ä¸‹è½½å¹¶ä¿å­˜åœ¨æœ¬åœ°ï¼Œè·¯å¾„åˆ†åˆ«ä¸º `ArtifexAI\clarity\models\` å’Œ `ArtifexAI\gfpgan\weights\` 
	    * ä¸‹è½½åœ°å€åˆ†åˆ«ä¸º
	    * éœ€è¦æ”¾åœ¨`ArtifexAI\clarity\models\` ä¸­çš„æ¨¡åž‹ï¼š
		    * [Real-ESRGAN/docs/model_zoo.md at master Â· xinntao/Real-ESRGAN](https://github.com/xinntao/Real-ESRGAN/blob/master/docs/model_zoo.md)ï¼Œä¸‹è½½RealESRGAN_x4plus.pth
		    * [TencentARC/GFPGAN: GFPGAN aims at developing Practical Algorithms for Real-world Face Restoration.](https://github.com/TencentARC/GFPGAN?tab=readme-ov-file)ï¼Œä¸‹è½½GFPGANv1.4.pth
	    * éœ€è¦æ”¾åœ¨`ArtifexAI\gfpgan\weights\`  ä¸­çš„æ¨¡åž‹ï¼š
		    * https://github.com/xinntao/facexlib/releases/download/v0.1.0/detection_Resnet50_Final.pth è¿™ä¼šè‡ªåŠ¨ä¸‹è½½
		    * https://github.com/xinntao/facexlib/releases/download/v0.2.2/parsing_parsenet.pth è¿™ä¼šè‡ªåŠ¨ä¸‹è½½
	* æœ¬é¡¹ç›®ä½¿ç”¨çš„å¼€æºæ¨¡åž‹çš„é“¾æŽ¥ä¹Ÿåœ¨ä»¥ä¸Šä¸‹è½½é“¾æŽ¥ä¸­ç»™å‡ºï¼Œæ‚¨å¯è®¿é—®åŽŸé¡¹ç›®æ¥äº†è§£è¿™äº›æ¨¡åž‹çš„ä½¿ç”¨æ–¹æ³•

## è¿è¡Œé¡¹ç›®

åœ¨å®Œæˆéƒ¨ç½²åŽï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿è¡Œ Flask åº”ç”¨ï¼š

1.  **æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒ**ï¼ˆå¦‚æžœå°šæœªæ¿€æ´»ï¼‰ï¼š
    ```bash
    # Windows
    .venv\Scripts\activate
    # macOS/Linux
    source .venv/bin/activate
    ```

2.  **è¿è¡Œ Flask åº”ç”¨**ï¼š
    ```bash
    python app.py
    ```

3.  **è®¿é—®åº”ç”¨**ï¼š
    åº”ç”¨ç¨‹åºå¯åŠ¨åŽï¼Œæ‚¨å°†åœ¨ç»ˆç«¯çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹è¾“å‡ºï¼š
    ```
     * Running on http://127.0.0.1:5000
    ```
    åœ¨æ‚¨çš„æµè§ˆå™¨ä¸­æ‰“å¼€ `http://127.0.0.1:5000` å³å¯è®¿é—® ArtifexAI å¹³å°ã€‚


## å¼•ç”¨æ¨¡åž‹æ¥æº
-  **Real-ESRGAN**
	- åœ°å€ï¼š[https://github.com/xinntao/Real-ESRGAN](https://github.com/xinntao/Real-ESRGAN)
	- è®ºæ–‡ï¼š[Real-ESRGAN: Training Real-World Blind Super-Resolution with Pure Synthetic Data](https://arxiv.org/abs/2107.10833)
- Â **Stable Diffusion**
	- åœ°å€ï¼š[https://github.com/CompVis/stable-diffusion](https://github.com/CompVis/stable-diffusion)
- Â **GFPGAN**
	- åœ°å€ï¼š[TencentARC/GFPGAN: GFPGAN aims at developing Practical Algorithms for Real-world Face Restoration.](https://github.com/TencentARC/GFPGAN)
	- è®ºæ–‡ï¼š[GFPGAN: Towards Real-World Blind Face Restoration with Generative Facial Prior](https://arxiv.org/abs/2101.04061)
- **YOLOv5**
	- åœ°å€ï¼š[ultralytics/yolov5ï¼šPyTorch > ONNX ä¸­çš„ YOLOv5 ðŸš€ > CoreML > TFLite --- ultralytics/yolov5: YOLOv5 ðŸš€ in PyTorch > ONNX > CoreML > TFLite](https://github.com/ultralytics/yolov5)